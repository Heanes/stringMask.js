/*
 * stringMask - v1.0.0 - 2018-07-24 10:08:08 Tuesday
 * https://github.com/heanes/stringMask.js
 * Copyright (c) 2018 Heanes
 * Licensed MIT License
 */

!function(r,e,t,o){"use strict";var a="stringMask",n={};n.setting={start:3,length:4,fromEnd:!1,maskSymbol:"*",clickToToggle:!0,$clickElement:o,onClick:o,beforeMasked:o,afterMasked:o,beforeRecover:o,afterRecover:o,strMaskMethod:o};var h=function(t,e){return this._defaults=this.getDefaults(),this.$element=r(t),this.$el_=this.$element.clone(!0),this.options=r.extend(!0,{},this._defaults.setting,e),this.handleToStandardOption(this.options),this.options.$clickElement=this.options.$clickElement||this.$element,this.init(),{options:this.options,init:r.proxy(this.init,this),remove:r.proxy(this.remove,this),setMasked:r.proxy(this.setMasked,this),setRecover:r.proxy(this.setRecover,this),refreshOption:r.proxy(this.refreshOption,this),test:r.proxy(this.test,this)}};function c(t,e){return new Array(e+1).join(t)}function f(t){e.console&&e.console.error(t)}h.V=h.VERSION="version",h.DEFAULTS=n.setting,h.prototype={init:function(){return this.data={stringOrigin:this.getOriginText(this.$element),stringMasked:"",maskStatus:!1},this.render(),this},destroy:function(){return this.$element.html(this.$el_.html()),this},render:function(){var t=this.options;this.bindChangeEvent(t),this.bindMouseEvent(t);var e="";return e="function"==typeof t.strMaskMethod?t.strMaskMethod(this.data.stringOrigin,t):function(t,e,n,i,s){if(e=e===o?4:parseInt(e),n=n===o?4:parseInt(n),i=i===o?"*":i,s=s||!1,null===t||o===t||0===t.length)return"";if(e=e<0?0:e,n=n<0?0:n,t.length<=e)return t;if(t.length<=n)return c(i,t.length);t.length<=e+n&&(n=t.length-e);var r="",a="";s?(r=t.substr(t.length-e-n,n),a=t.substr(0,t.length-e-n)+c(i,r.length)+t.substr(t.length-e,e)):(r=t.substr(e,n),a=t.substr(0,e)+c(i,r.length)+t.substr(e+n,t.length-e-n));return a}(this.data.stringOrigin,t.start,t.length,t.maskSymbol,t.fromEnd),t.$clickElement.trigger("beforeChange"),this.setTextToElement(e),this.data.stringMasked=e,this.data.maskStatus=!0,t.$clickElement.trigger("afterChange"),this},handleToStandardOption:function(t){return t.start=parseInt(t.start),t.length=parseInt(t.length),t.fromEnd=t.fromEnd+""=="true",t.clickToToggle=t.clickToToggle+""=="true",this},getOriginText:function(t){return t&&t.text()||""},setTextToElement:function(t,e){return(e=e||this.$element).empty().append(t),this},refreshOption:function(t){this.options=r.extend(!0,{},this.options,t),this.handleToStandardOption(this.options),this.destroy(),this.init()},bindMouseEvent:function(t){return this.onClick(t),this},bindChangeEvent:function(t){return this.beforeMasked(t),this.afterMasked(t),this.beforeRecover(t),this.afterRecover(t),this.beforeChange(t),this.afterChange(t),this},stringMaskElementClickFunc:function(t){t.data.$clickElement.trigger("stringMask.click")},onClick:function(t){if(!t.clickToToggle)return t.$clickElement.off("click",this.stringMaskElementClickFunc),!1;t.$clickElement.off("click",this.stringMaskElementClickFunc).on("click",t,this.stringMaskElementClickFunc);var e=this;return t.$clickElement.off("stringMask.click").on("stringMask.click",function(){r(this).trigger("beforeChange");var t=e.data.maskStatus?e.data.stringOrigin:e.data.stringMasked;e.setTextToElement(t),e.data.maskStatus=!e.data.maskStatus,r(this).trigger("afterChange")}),this},beforeChange:function(t){var e=this;t.$clickElement.off("beforeChange").on("beforeChange",function(){e.data.maskStatus||r(this).trigger("beforeMasked"),e.data.maskStatus&&r(this).trigger("beforeRecover")})},afterChange:function(t){var e=this;t.$clickElement.off("afterChange").on("afterChange",function(){e.data.maskStatus&&r(this).trigger("afterMasked"),e.data.maskStatus||r(this).trigger("afterRecover")})},beforeMasked:function(t){var e=this;t.$clickElement.off("beforeMasked").on("beforeMasked",function(){e.data.maskStatus||"function"==typeof t.beforeMasked&&t.beforeMasked(t)})},afterMasked:function(t){var e=this;t.$clickElement.off("afterMasked").on("afterMasked",function(){e.data.maskStatus&&"function"==typeof t.afterMasked&&t.afterMasked(t)})},beforeRecover:function(t){var e=this;t.$clickElement.off("beforeRecover").on("beforeRecover",function(){e.data.maskStatus&&"function"==typeof t.beforeRecover&&t.beforeRecover(t)})},afterRecover:function(t){var e=this;t.$clickElement.off("afterRecover").on("afterRecover",function(){e.data.maskStatus||"function"==typeof t.afterRecover&&t.afterRecover(t)})},setMasked:function(t){this.setTextToElement(this.data.stringMasked),this.data.maskStatus=!0},setRecover:function(t){this.setTextToElement(this.data.stringOrigin),this.data.maskStatus=!1},getDefaults:function(){return h.DEFAULTS}},r.fn[a]=function(n,i){var s;return this.each(function(){var t=r(this),e=r.data(this,a);"string"==typeof n?e?r.isFunction(e[n])&&"_"!==n.charAt(0)?("destroy"===n&&t.removeData(a),i instanceof Array||(i=[i]),s=e[n].apply(e,i)):f("No such method : "+n):f("Not initialized, can not call method : "+n):"boolean"==typeof n?s=e:r.data(this,a,new h(this,r.extend(!0,{},n)))}),s||this}}(jQuery,window,document);
//# sourceMappingURL=stringMask.js.map